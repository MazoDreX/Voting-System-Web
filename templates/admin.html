<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin Dashboard</title>
    <link href="{{url_for('static',filename='css/output.css')}}" rel="stylesheet">
</head>
<body class="bg-gray-100 h-screen flex items-center justify-center">
    <div class="min-h-screen flex items-center justify-center bg-gray-100">
        <div class="max-w-md w-full space-y-8 p-8 bg-white rounded-xl shadow-md">
          <div class="text-center">
            <h1 class="text-3xl font-bold">Welcome, Admin {{ username }}!</h1>
            <p class="mt-4">Apa yang anda ingin lakukan?</p>
          </div>
          
          <div class="flex flex-col sm:flex-row justify-center items-center space-y-4 sm:space-y-0 sm:space-x-4 mt-8">
            <div class="text-center">
                <button href="/candidate" class="w-full sm:w-auto px-4 py-2 bg-blue-500 text-white font-semibold rounded-lg shadow-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-blue-400 focus:ring-opacity-75 transition-colors duration-200">
                Kelola kandidat
                </button>
            </div>
            <div class="text-center">
                <button class="w-full sm:w-auto px-4 py-2 border border-green-500 text-green-500 font-semibold rounded-lg shadow-md hover:bg-green-500 hover:text-white focus:outline-none focus:ring-2 focus:ring-green-400 focus:ring-opacity-75 transition-colors duration-200">
                Kelola Voter
                </button>
            </div>
          </div>
          <div class="text-center">
            <a href="/logout" class="mt-4 inline-block bg-red-500 text-white px-4 py-2 rounded hover:bg-red-600 transition">Logout</a>
          </div>
        </div>
      </div>

      <h1>Admin Dashboard</h1>
      <a href="/auth/logout">Logout</a>
      <ul id="candidate-list"></ul>
      <input type="text" id="candidate-name" placeholder="Nama Kandidat">
      <button onclick="addCandidate()">Tambah Kandidat</button>
      <script>
          async function loadCandidates() {
              const response = await fetch("/api/candidates");
              const data = await response.json();
              const candidateList = document.getElementById("candidate-list");
              candidateList.innerHTML = "";
              data.candidates.forEach((candidate, index) => {
                  const li = document.createElement("li");
                  li.innerHTML = `
                      ${candidate}
                      <button onclick="deleteCandidate(${index})">Hapus</button>
                  `;
                  candidateList.appendChild(li);
              });
          }
  
          async function addCandidate() {
              const name = document.getElementById("candidate-name").value.trim();
              await fetch("/api/candidates", {
                  method: "POST",
                  headers: { "Content-Type": "application/json" },
                  body: JSON.stringify({ name }),
              });
              loadCandidates();
          }
  
          async function deleteCandidate(index) {
              await fetch(`/api/candidates/${index}`, { method: "DELETE" });
              loadCandidates();
          }
  
          document.addEventListener("DOMContentLoaded", loadCandidates);
      </script>
</body>
</html>
